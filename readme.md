rust port of OKC dumb_pre
